## 2024-05-23 - Waveform Vectorization Pitfall
**Learning:** In Python, `TimelineClip` stores waveform data as a `list[float]` (not a numpy array) to keep dependencies light or due to serialization. When attempting to optimize waveform drawing using `numpy` vectorization (`amps = np.array(waveform)[indices]`), I discovered this forces a full O(N) copy of the list into a numpy array on every draw call. For large audio clips (e.g. 1 hour = 360k samples), this copy overhead (~20ms) far outweighs the benefit of vectorized subsampling (~0.02ms vs ~0.4ms loop).
**Action:** When working with large lists that need subsampling, standard Python loops with stride/adaptive sampling (O(M) where M is pixels) are faster than converting to numpy (O(N) where N is samples) just for indexing, unless the data is *already* a numpy array. Verify data types before applying vectorization.
